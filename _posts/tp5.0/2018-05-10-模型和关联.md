---
layout: post
title: "模型和关联"
date: 2018-05-10
tag: thinkPHP5
---

[sql](https://github.com/Haixiewei/Haixiewei.github.io/blob/master/_posts/tp5.0/sql.php)

[getAttr](https://github.com/Haixiewei/Haixiewei.github.io/blob/master/_posts/tp5.0/getAttr.php)

[setAttr](https://github.com/Haixiewei/Haixiewei.github.io/blob/master/_posts/tp5.0/setAttr.php)

[类型转换和自动时间戳](https://github.com/Haixiewei/Haixiewei.github.io/blob/master/_posts/tp5.0/type.php)

`自动初始化`指 如果对该字段没有显性赋值，则自动设置为当前系统时间

`自动更新`指 如果修改了其它字段，则该字段的值将自动更新为当前系统时间

`UTC`协调世界时，又称世界统一时间,世界标准时间,国际协调时间,不属于任意时区<br>
中国大陆、中国香港、中国澳门、中国台湾、蒙古国、新加坡、马来西亚、菲律宾、西澳大利亚州的时间与UTC的时差均为+8，也就是UTC+8

```
// 自动写入时间戳字段
'auto_timestamp'  => true,
```

```
auto      新增及更新的时候自动完成的属性数组
insert    仅新增的时候自动完成的属性数组
update    仅更新的时候自动完成的属性数组
```

[查询范围](https://github.com/Haixiewei/Haixiewei.github.io/blob/master/_posts/tp5.0/scope.php)

```
UserModel
protected function scopeEmail($query,$email='')
{
  $query->where('email',$email);
}
// 这个查询范围 广
$list = UserModel::scope('email','baidu.com')->all();
```

全局查询范围

```
protected function scropeEmail($query)
{
  $query->where('email','baidu.com');
}
protected static function base($query)
{
  $query->where('status',1);
}

UserModel::scope('email')->all();

select * from `think_user` where `email` = 'baidu.com'
and `status` = 1 order by `id` desc

每次查询都会自动带上全局查询范围的查询条件
```

[输入和验证](https://github.com/Haixiewei/Haixiewei.github.io/blob/master/_posts/tp5.0/.php)

[application/index/view/user/create.html](https://github.com/Haixiewei/Haixiewei.github.io/blob/master/_posts/tp5.0/create.html)


















---------------
