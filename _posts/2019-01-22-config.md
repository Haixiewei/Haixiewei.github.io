---
layout: post
title: "config"
date: 2019-01-22
tag: tp5
---

### 默认配置目录

应用配置 application/

模块配置 application/indx/

### 自定义配置目录 CONF_PATH

入口文件中定义配置目录

```
define('CONF_PATH', __DIR__ . '/../config/');

```

config目录下创建config.php 也可以加个限制目录index 让每个模块定制配置

```
<?php

return[
  'site_name' => 'eee',
];
```

控制器文件中可以 config('site_name')

若定义了config配置目录 模块目录配置修改无效

### 扩展配置目录 extra

文件名 配置名 ； 内容 配置值

二级配置 [config/index/extra/aaa.php] 生成aaa数组的二级配置

控制器中可用 var_dump(config(aaa)); 生成二维数组

配置优先级，优先级高的设置相同配置会覆盖优先级低的，自定义配置目录下的要优先于应用目录下的配置文件

即：

config/模块/extra/配置文件   优先级高于 application/模块/extra/配置文件

config/模块/config.php 优先级高于 application/模块/config.php

config/config.php 优先级高于 application/config.php　　

### 多入口文件配置

admin.php

```
<?php
// [ 后台应用入口文件 ]
// 定义应用目录
define('APP_PATH', __DIR__ . '/../application/');
//定义自定义的配置目录
define('CONF_PATH', __DIR__ . '/../config/');

//绑定admin模块
define('BIND_MODULE','admin/Index');

// 加载框架引导文件
require __DIR__ . '/../thinkphp/start.php';
```

thinkphp/start.php

```
namespace think;

// ThinkPHP 引导文件
// 1. 加载基础文件
require __DIR__ . '/base.php';

App::route(false);//关闭路由

// 2. 执行应用
App::run()->send();
```

### 配置文件格式 php ini xml json

默认array数组键值对

ini名值对 xml标签对 json对象属性名值对

入口文件 ： define('CONF_EXT','.ini' | '.xml' | '.json')

可相应增加 config.ini

```
home = ys ;家 注释
age = aa
```

config.xml

```
<abc>
  <info>
      <home>ys</home>
      <job>php</job>
  </info>
  <age>25</age>
</abc>
```

config.json

```
{
  "base" : {
    "home" : 'ys',
    "age" : 25,
  }
  "sex" : "男"
}
```

了解即可

无论何种格式配置文件 最终都是array数组键值对方式返回
